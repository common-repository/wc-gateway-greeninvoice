/*! For license information please see backend.min.js.LICENSE.txt */
!function(n){function e(n){n.removeClass("syncing").addClass("error"),n.find(".morning-sync-button-label").text(greeninvoice_i18n.sync_error)}function o(e,o){e.each((function(){var e=n(this),s=e.attr("id").split("_").pop();o?e.prop("checked",o[s]):e.prop("checked",!1)}))}n(document).on("click",".morning-sync-button:not(.syncing):not(.synced)",(function(){var s=n(this),i=n(".morning-payment-gateway"),t=n(".morning-status-indicator");s.addClass("syncing"),s.find(".morning-sync-button-label").text(greeninvoice_i18n.syncing),n.ajax({url:greeninvoice_vars.ajax_url,type:"post",dataType:"json",data:{action:"morning_sync_gateways",nonce:greeninvoice_vars.sync_nonce},success:function(n){var c;n.success?(function(n){n.removeClass("syncing").addClass("synced"),n.find(".morning-sync-button-label").text(greeninvoice_i18n.synced)}(s),o(i,n.data.gateways)):(e(s),o(i)),c=t,n.success?(c.removeClass("no empty").addClass("yes"),c.text(greeninvoice_i18n.status_success)):(c.removeClass("yes empty").addClass("no"),c.text(greeninvoice_i18n.status_error))},error:function(){return e(s)}})})).on("click","#greeninvoice_download_debug_data:not(.working)",(function(){n(this).addClass("working"),n.ajax({url:greeninvoice_vars.ajax_url,type:"post",data:{action:"greeninvoice_generate_debug_file",nonce:greeninvoice_vars.download_debug_file_nonce},xhrFields:{responseType:"blob"},success:function(n){var e=document.createElement("a");e.href=window.URL.createObjectURL(n),e.download="site-data.zip",document.body.append(e),e.click(),e.remove(),window.URL.revokeObjectURL(e.href)},error:function(n){console.error(n)}})}))}(jQuery);